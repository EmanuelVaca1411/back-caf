import{Q as w,h as _,k,c as y,w as d,u as e,o as C,b as l,a,j as b,d as g}from"./app-D69rCXnV.js";import{s as p,a as R}from"./index-B9W8B1X0.js";import{s as o,a as c}from"./index-DgJxcnbg.js";import"./index-CzU0mkyt.js";import"./index-t5oXrQjc.js";import"./index-CF1_BE5E.js";import"./index-BBHh5ADn.js";import"./index-BHEkNHkD.js";import"./index-A4JaSybz.js";import"./index-rlewMt2d.js";import"./index-DCcAueAt.js";const E={class:"flex justify-between"},T={class:"flex flex-wrap justify-end gap-2"},Q={__name:"TicketPurchaseTable",setup(A){const u=w(),n=_(()=>{var t;return((t=u.props)==null?void 0:t.ticket_purchases)??[]}),r=k({}),m=t=>{console.log("Fila expandida:",t.data)},f=t=>{console.log("Fila colapsada:",t.data)},h=()=>{r.value=n.value.reduce((t,s)=>(t[s.id]=!0)&&t,{})},x=()=>{r.value=null},v=t=>{const{name:s}=t.status;switch(s){case"Pendiente":return"info";case"Completado":return"success";case"Cancelado":return"danger";default:return"warn"}};return(t,s)=>(C(),y(e(c),{expandedRows:r.value,"onUpdate:expandedRows":s[0]||(s[0]=i=>r.value=i),value:n.value,dataKey:"id",onRowExpand:m,onRowCollapse:f,tableStyle:"min-width: 50rem"},{header:d(()=>[l("div",E,[s[1]||(s[1]=l("h2",{class:"text-xl font-bold"},"Entradas",-1)),l("div",T,[a(e(p),{text:"",icon:"pi pi-plus",label:"Mostrar todo",onClick:h}),a(e(p),{text:"",icon:"pi pi-minus",label:"Ocultar todo",onClick:x})])])]),expansion:d(({data:i})=>[l("div",null,[s[3]||(s[3]=l("h3",null,"Campistas",-1)),a(e(c),{value:i.ticket_participants,dataKey:"ci"},{default:d(()=>[a(e(o),{field:"participant.ci",header:"#Carnet"}),a(e(o),{field:"participant.first_name",header:"Nombre"}),a(e(o),{field:"participant.last_name",header:"Apellido"})]),_:2},1032,["value"])])]),default:d(()=>[a(e(o),{expander:"",style:{width:"5rem"}}),a(e(o),{field:"ticket.name",header:"Ticket"}),a(e(o),{field:"amount",header:"Cantidad de entradas"}),a(e(o),{field:"total",header:"Total"}),a(e(o),{field:"paid_amount",header:"Monto cancelado"}),a(e(o),{field:"remaining_amount",header:"Monto a pagar"}),a(e(o),{field:"created_at",header:"Fecha de compra"}),a(e(o),{field:"status.name",header:"Estado"},{body:d(({data:i})=>[a(e(R),{value:i.status.name,severity:v(i)},null,8,["value","severity"])]),_:1}),a(e(o),{header:"Acciones",style:{width:"8rem"}},{body:d(({data:i})=>[a(e(b),{href:`/admin/tickets/edit/${i.id}`},{default:d(()=>s[2]||(s[2]=[g(" Editar ")])),_:2},1032,["href"])]),_:1})]),_:1},8,["expandedRows","value"]))}};export{Q as default};
