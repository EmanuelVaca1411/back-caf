import{Y as R,k,a5 as j,a6 as C,Q as O,h as b,T as $,c as E,w as v,u as s,a7 as T,o as m,b as t,t as f,a as n,f as y,g,e as U}from"./app-BqyRcbdb.js";import{_ as w}from"./InputError-CZyaWOG9.js";import{s as B}from"./index-CkVAUIMw.js";import{s as I}from"./index-PowM8yPe.js";import{s as z,a as F}from"./index-BoQRU9D9.js";import{s as P}from"./index-LXZMfoyd.js";import{s as N}from"./index-CugmTqar.js";const Q=R("payment",()=>{const i=k(!1);return{isOpenPaymentModal:i,openPaymentModal:()=>{console.log("Open payment"),i.value=!0},closePaymentModal:()=>{i.value=!1}}}),D={class:"bg-gray-100 p-4 rounded-md shadow-sm mb-4"},L={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-center"},A={class:"text-gray-800 text-xl font-bold"},G={class:"text-green-600 text-xl font-bold"},Y={class:"text-red-600 text-xl font-bold"},q={class:"flex flex-row flex-wrap items-start sm:items-center gap-2 my-5"},H={class:"flex flex-col gap-2 w-full"},J={class:"flex flex-col gap-2 w-full"},K={key:0,class:"flex flex-col justify-center items-center"},W={key:1,class:"flex flex-col items-center gap-2"},X={class:"card flex flex-col items-center gap-6"},Z=["src"],ee={class:"flex justify-between gap-5 w-full md:px-5"},te={__name:"PaymentModal",setup(i){const d=Q(),{closePaymentModal:u}=d,{isOpenPaymentModal:c}=j(d),x=C(),_=O(),p=k(null),M=b(()=>{var a;return(a=_.props)==null?void 0:a.type_payments}),r=b(()=>{var a;return(a=_.props)==null?void 0:a.ticket_purchase}),o=$({amount:0,type_payment_id:null,ticket_purchase_id:r.value.id,image:null});function S(a){const e=a.files[0];o.image=e;const l=new FileReader;l.onload=async h=>{p.value=h.target.result},l.readAsDataURL(e)}const V=()=>{o.post(route("admin.ticket-payments.store"),{onFinish:()=>{},onSuccess:()=>{x.add({severity:"success",summary:"Éxito",detail:"Pago registrado exitosamente",life:3e3}),o.reset(),u()},onError:()=>{const a=Object.values(o.errors)[0];x.add({severity:"error",summary:"Error",detail:a??"Error al registrar pago",life:3e3})}})};return(a,e)=>(m(),E(s(N),{visible:s(c),"onUpdate:visible":e[2]||(e[2]=l=>T(c)?c.value=l:null),modal:"",class:"w-full sm:w-4/5 md:w-3/5 lg:w-2/5"},{header:v(()=>e[3]||(e[3]=[t("h3",{class:"text-xl font-bold"},"Registrando pago",-1)])),default:v(()=>[t("form",{onSubmit:U(V,["prevent"])},[t("div",D,[t("div",L,[t("div",null,[e[4]||(e[4]=t("span",{class:"text-gray-600 text-sm font-medium block"},"Total:",-1)),t("span",A,f(r.value.total),1)]),t("div",null,[e[5]||(e[5]=t("span",{class:"text-gray-600 text-sm font-medium block"},"Monto Cancelado:",-1)),t("span",G,f(r.value.paid_amount),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"text-gray-600 text-sm font-medium block"},"Monto Pendiente:",-1)),t("span",Y,f(r.value.remaining_amount),1)])])]),t("div",q,[t("div",H,[e[7]||(e[7]=t("label",{class:"text-base font-medium",for:"amount"},"Monto",-1)),n(s(B),{modelValue:s(o).amount,"onUpdate:modelValue":e[0]||(e[0]=l=>s(o).amount=l),placeholder:"Ingrese un monto",min:0,max:r.value.remaining_amount,class:"w-full",mode:"decimal"},null,8,["modelValue","max"]),n(w,{message:s(o).errors.amount},null,8,["message"])]),t("div",J,[e[8]||(e[8]=t("label",{class:"text-base font-medium",for:"payment_method_id"},"Método de Pago",-1)),n(s(I),{modelValue:s(o).type_payment_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s(o).type_payment_id=l),inputId:"payment_method_id",options:M.value,optionLabel:"name",optionValue:"id",placeholder:"Selecciona un método de pago"},null,8,["modelValue","options"]),n(w,{message:s(o).errors.type_payment_id},null,8,["message"])])]),s(o).type_payment_id===2?(m(),y("div",K,[e[9]||(e[9]=t("label",{for:"",class:"font-semibold text-center"},"Escanea el QR",-1)),n(s(z),{src:"/QR.jpg",alt:"Image",preview:"",width:"250"})])):g("",!0),s(o).type_payment_id===2?(m(),y("div",W,[e[10]||(e[10]=t("label",{class:"text-base font-medium",for:"reference"},"Subir comprobante",-1)),t("div",X,[n(s(F),{mode:"basic",onSelect:S,customUpload:"",auto:"",severity:"secondary",class:"p-button-outlined"}),p.value?(m(),y("img",{key:0,src:p.value,alt:"Image",class:"shadow-md rounded-xl w-52 h-52",style:{filter:"grayscale(100%)"}},null,8,Z)):g("",!0)])])):g("",!0),t("div",ee,[n(s(P),{label:"Cancelar",size:"small",class:"p-button-danger w-1/2 md:w-1/4 xl:w-1/5",onClick:s(u)},null,8,["onClick"]),n(s(P),{label:"Guardar",size:"small",type:"submit",class:"p-button-success w-1/2 md:w-1/4 xl:w-1/5"})])],32)]),_:1},8,["visible"]))}},me=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{me as P,te as _,Q as u};
